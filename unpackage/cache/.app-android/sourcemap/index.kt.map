{"version":3,"sources":["../../../../../../../../uniapp/HBuilderX/plugins/uniapp-cli-vite/node_modules/@dcloudio/uni-console/src/runtime/app/socket.ts","App.uvue","../../../../../../../../uniapp/HBuilderX/plugins/uniapp-cli-vite/node_modules/@dcloudio/uni-console/src/runtime/app/index.ts","main.uts"],"sourcesContent":["/// <reference types=\"@dcloudio/uni-app-x/types/uni/global\" />\n// 之所以又写了一份，是因为外层的socket，connectSocket的时候必须传入multiple:true\n// 但是android又不能传入，目前代码里又不能写条件编译之类的。\nexport function initRuntimeSocket(\n  hosts: string,\n  port: string,\n  id: string\n): Promise<SocketTask | null> {\n  if (hosts == '' || port == '' || id == '') return Promise.resolve(null)\n  return hosts\n    .split(',')\n    .reduce<Promise<SocketTask | null>>(\n      (\n        promise: Promise<SocketTask | null>,\n        host: string\n      ): Promise<SocketTask | null> => {\n        return promise.then((socket): Promise<SocketTask | null> => {\n          if (socket != null) return Promise.resolve(socket)\n          return tryConnectSocket(host, port, id)\n        })\n      },\n      Promise.resolve(null)\n    )\n}\n\nconst SOCKET_TIMEOUT = 500\nfunction tryConnectSocket(\n  host: string,\n  port: string,\n  id: string\n): Promise<SocketTask | null> {\n  return new Promise((resolve, reject) => {\n    const socket = uni.connectSocket({\n      url: `ws://${host}:${port}/${id}`,\n      fail() {\n        resolve(null)\n      },\n    })\n    const timer = setTimeout(() => {\n      // @ts-expect-error\n      socket.close({\n        code: 1006,\n        reason: 'connect timeout',\n      } as CloseSocketOptions)\n      resolve(null)\n    }, SOCKET_TIMEOUT)\n\n    socket.onOpen((e) => {\n      clearTimeout(timer)\n      resolve(socket)\n    })\n    socket.onClose((e) => {\n      clearTimeout(timer)\n      resolve(null)\n    })\n    socket.onError((e) => {\n      clearTimeout(timer)\n      resolve(null)\n    })\n  })\n}\n","<script lang=\"uts\">\r\n\tlet firstBackTime = 0\r\n\texport default {\r\n\t\tonLaunch: function () {\r\n\t\t\tconsole.log('App Launch')\r\n\t\t},\r\n\t\tonShow: function () {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function () {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n\r\n\t\tonLastPageBackPress: function () {\r\n\t\t\tconsole.log('App LastPageBackPress')\r\n\t\t\tif (firstBackTime == 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '再按一次退出应用',\r\n\t\t\t\t\tposition: 'bottom',\r\n\t\t\t\t})\r\n\t\t\t\tfirstBackTime = Date.now()\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tfirstBackTime = 0\r\n\t\t\t\t}, 2000)\r\n\t\t\t} else if (Date.now() - firstBackTime < 2000) {\r\n\t\t\t\tfirstBackTime = Date.now()\r\n\t\t\t\tuni.exit()\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonExit: function () {\r\n\t\t\tconsole.log('App Exit')\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t/*每个页面公共css */\r\n\t\r\n\t.uni-row {\r\n\t\tflex-direction: row;\r\n\t}\r\n\t.uni-column {\r\n\t\tflex-direction: column;\r\n\t}\r\n</style>","import { initRuntimeSocket } from './socket'\n\nexport function initRuntimeSocketService(): Promise<boolean> {\n  const hosts: string = process.env.UNI_SOCKET_HOSTS\n  const port: string = process.env.UNI_SOCKET_PORT\n  const id: string = process.env.UNI_SOCKET_ID\n  if (hosts == '' || port == '' || id == '') return Promise.resolve(false)\n  let socketTask: SocketTask | null = null\n  __registerWebViewUniConsole(\n    (): string => {\n      return process.env.UNI_CONSOLE_WEBVIEW_EVAL_JS_CODE\n    },\n    (data: string) => {\n      socketTask?.send({\n        data,\n      } as SendSocketMessageOptions)\n    }\n  )\n  return Promise.resolve()\n    .then((): Promise<boolean> => {\n      return initRuntimeSocket(hosts, port, id).then((socket): boolean => {\n        if (socket == null) {\n          return false\n        }\n        socketTask = socket\n        return true\n      })\n    })\n    .catch((): boolean => {\n      return false\n    })\n}\n\ninitRuntimeSocketService()\n","import 'D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/node_modules/@dcloudio/uni-console/src/runtime/app/index.ts';import App from './App.uvue'\r\n\r\nimport { createSSRApp } from 'vue'\r\nexport function createApp() {\r\n\tconst app = createSSRApp(App)\r\n\treturn {\r\n\t\tapp\r\n\t}\r\n}\nexport function main(app: IApp) {\n    definePageRoutes();\n    defineAppConfig();\n    (createApp()['app'] as VueApp).mount(app, GenUniApp());\n}\n\nexport class UniAppConfig extends io.dcloud.uniapp.appframe.AppConfig {\n    override name: string = \"xiangmu111\"\n    override appid: string = \"__UNI__54AC7C7\"\n    override versionName: string = \"1.0.0\"\n    override versionCode: string = \"100\"\n    override uniCompilerVersion: string = \"4.57\"\n    \n    constructor() { super() }\n}\n\nimport GenPagesIndexLogin1Class from './pages/index/login1.uvue?type=page'\nimport GenPagesIndexIndexClass from './pages/index/index.uvue?type=page'\nimport GenPagesIndexMyClass from './pages/index/my.uvue?type=page'\nimport GenPagesIndexCloudpanClass from './pages/index/cloudpan.uvue?type=page'\nimport GenPagesIndexLogin2Class from './pages/index/login2.uvue?type=page'\nimport GenPagesIndexRegisterClass from './pages/index/register.uvue?type=page'\nimport GenPagesApLoginApLoginClass from './pages/ApLogin/ApLogin.uvue?type=page'\nfunction definePageRoutes() {\n__uniRoutes.push({ path: \"pages/index/login1\", component: GenPagesIndexLogin1Class, meta: { isQuit: true } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"1\"],[\"backgroundColorContent\",\"#324148\"]]) } as UniPageRoute)\n__uniRoutes.push({ path: \"pages/index/index\", component: GenPagesIndexIndexClass, meta: { isQuit: false } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"aaa\"],[\"backgroundColorContent\",\"#fff3cd\"],[\"enablePullDownRefresh\",false]]) } as UniPageRoute)\n__uniRoutes.push({ path: \"pages/index/my\", component: GenPagesIndexMyClass, meta: { isQuit: false } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"uni-app 1\"],[\"backgroundColorContent\",\"#fff3cd\"]]) } as UniPageRoute)\n__uniRoutes.push({ path: \"pages/index/cloudpan\", component: GenPagesIndexCloudpanClass, meta: { isQuit: false } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"uni-app 1\"],[\"backgroundColorContent\",\"#fff3cd\"]]) } as UniPageRoute)\n__uniRoutes.push({ path: \"pages/index/login2\", component: GenPagesIndexLogin2Class, meta: { isQuit: false } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"\"],[\"backgroundColorContent\",\"#324148\"]]) } as UniPageRoute)\n__uniRoutes.push({ path: \"pages/index/register\", component: GenPagesIndexRegisterClass, meta: { isQuit: false } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"\"],[\"backgroundColorContent\",\"#324148\"]]) } as UniPageRoute)\n__uniRoutes.push({ path: \"pages/ApLogin/ApLogin\", component: GenPagesApLoginApLoginClass, meta: { isQuit: false } as UniPageMeta, style: utsMapOf([[\"navigationBarTitleText\",\"账号密码登录\"]]) } as UniPageRoute)\n}\nconst __uniTabBar: Map<string, any | null> | null = utsMapOf([[\"color\",\"#333333\"],[\"selectedColor\",\"#28a745\"],[\"backgroundColor\",\"#fff8e1\"],[\"list\",[utsMapOf([[\"pagePath\",\"pages/index/index\"],[\"text\",\"首页\"]]),utsMapOf([[\"pagePath\",\"pages/index/cloudpan\"],[\"text\",\"云盘\"]]),utsMapOf([[\"pagePath\",\"pages/index/my\"],[\"text\",\"我的\"]])]]])\nconst __uniLaunchPage: Map<string, any | null> = utsMapOf([[\"url\",\"pages/index/login1\"],[\"style\",utsMapOf([[\"navigationBarTitleText\",\"1\"],[\"backgroundColorContent\",\"#324148\"]])]])\nfunction defineAppConfig(){\n  __uniConfig.entryPagePath = '/pages/index/login1'\n  __uniConfig.globalStyle = utsMapOf([[\"navigationBarTextStyle\",\"black\"],[\"navigationBarTitleText\",\"uni-app x\"],[\"navigationBarBackgroundColor\",\"#fff8e1\"],[\"backgroundColor\",\"#F8F8F8\"],[\"background\",\"#fff3cd\"]])\n  __uniConfig.getTabBarConfig = ():Map<string, any> | null =>  utsMapOf([[\"color\",\"#333333\"],[\"selectedColor\",\"#28a745\"],[\"backgroundColor\",\"#fff8e1\"],[\"list\",[utsMapOf([[\"pagePath\",\"pages/index/index\"],[\"text\",\"首页\"]]),utsMapOf([[\"pagePath\",\"pages/index/cloudpan\"],[\"text\",\"云盘\"]]),utsMapOf([[\"pagePath\",\"pages/index/my\"],[\"text\",\"我的\"]])]]])\n  __uniConfig.tabBar = __uniConfig.getTabBarConfig()\n  __uniConfig.conditionUrl = ''\n  __uniConfig.uniIdRouter = utsMapOf()\n  \n  __uniConfig.ready = true\n}\n"],"names":[],"mappings":"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"}